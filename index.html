
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Mythological Codex</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
    body { background-color: #050505; color: #e0e0e0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; overflow: hidden; }
    
    /* CONTROL PANEL */
    #controls { position: absolute; top: 20px; left: 20px; z-index: 100; background: rgba(0,0,0,0.95); padding: 20px; border-radius: 8px; border: 1px solid #444; width: 250px; box-shadow: 0 0 20px rgba(0,0,0,0.8); }
    h2 { margin: 0 0 15px 0; color: #D4AF37; font-size: 20px; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid #444; padding-bottom: 10px; }
    
    button { display: block; width: 100%; background: #222; color: #aaa; border: 1px solid #555; padding: 10px; cursor: pointer; margin-bottom: 8px; font-weight: bold; text-align: left; transition: all 0.2s; }
    button:hover { background: #333; color: white; border-color: #777; }
    button.active { background: #D4AF37; color: black; border-color: #FFD700; box-shadow: 0 0 10px rgba(212, 175, 55, 0.4); }
    
    /* VIEWS */
    #canvas { width: 100vw; height: 100vh; display: block; }
    #analysis-view { display: none; position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; background: #080808; overflow-y: auto; padding: 40px 40px 40px 300px; box-sizing: border-box; }
    
    /* ANALYSIS TEXT STYLES */
    .essay-container { max-width: 900px; margin-bottom: 100px; }
    .essay-title { font-size: 32px; color: #D4AF37; margin-bottom: 10px; font-weight: bold; border-bottom: 2px solid #D4AF37; padding-bottom: 15px; }
    .essay-subtitle { font-size: 18px; color: #888; margin-bottom: 40px; font-style: italic; }
    
    .section-title { font-size: 24px; color: #00BFFF; margin-top: 60px; margin-bottom: 20px; border-left: 4px solid #00BFFF; padding-left: 15px; }
    .sub-section { font-size: 18px; color: #fff; margin-top: 30px; margin-bottom: 10px; font-weight: bold; }
    
    p { line-height: 1.8; font-size: 16px; color: #ccc; margin-bottom: 20px; }
    strong { color: #fff; }
    em { color: #D4AF37; }
    
    .highlight-box { background: #111; border: 1px solid #333; padding: 20px; border-radius: 8px; margin: 30px 0; }
    .highlight-title { color: #FF69B4; font-weight: bold; margin-bottom: 10px; display: block; text-transform: uppercase; font-size: 12px; letter-spacing: 1px; }
    
    ul { margin-bottom: 20px; }
    li { margin-bottom: 10px; line-height: 1.6; color: #ccc; }
    
    /* D3 STYLES */
    .node rect { stroke: #333; stroke-width: 1px; }
    .link { fill: none; stroke: #444; stroke-width: 1.5px; opacity: 0.5; }
    .map-pin { fill: #D4AF37; stroke: #000; cursor: pointer; transition: r 0.2s; }
    .map-pin:hover { fill: #fff; r: 8; }
    
    /* CARD TEXT */
    .card-header { font-weight: bold; font-size: 16px; fill: #D4AF37; }
    .col-header { font-size: 9px; fill: #666; font-weight: bold; }
    .row-role { font-size: 10px; fill: #888; text-transform: uppercase; font-weight: bold; }
    .row-name { font-size: 12px; fill: #fff; font-weight: bold; }
    .row-data { font-size: 10px; fill: #aaa; }
    .col-bg { fill: #0a0a0a; stroke: #333; }
    .col-title { font-size: 14px; fill: #D4AF37; font-weight: bold; text-anchor: middle; }
</style>
</head>
<body>

<div id="controls">
    <h2>The Codex</h2>
    <button id="btn-tree" class="active" onclick="switchMode('tree')">Genealogy Tree</button>
    <button id="btn-cols" onclick="switchMode('cols')">Comparison Columns</button>
    <button id="btn-map" onclick="switchMode('map')">Geospatial Map</button>
    <button id="btn-analysis" onclick="switchMode('analysis')">Synthesis & Analysis</button>
    <div style="margin-top:15px; font-size:11px; color:#666; border-top:1px solid #333; padding-top:10px;">
        Use scroll wheel to zoom.<br>Drag to pan.<br>Click nodes for details.
    </div>
</div>

<svg id="canvas"></svg>

<div id="analysis-view">
    <div class="essay-container">
        <div class="essay-title">The Synthesis: The Unity of Myth</div>
        <div class="essay-subtitle">A forensic breakdown of the "Cosmic Code" hidden in language, calendar, and archetypes.</div>

        <p>When we lay out the pantheons of the world side-by-side, we do not see chaos. We see a coherent, repeating structureâ€”a "source code" of human memory. This analysis breaks down the specific mechanisms that connect these deities across time and space.</p>

        <div class="section-title">1. The Linguistic "Smoking Gun"</div>
        <p>The strongest proof that these deities are not separate entities but shared memories lies in the <strong>Days of the Week</strong>. The 7-day week, originating in Babylon, acts as a Rosetta Stone for identifying gods across cultures. The Romans translated Germanic gods not by their appearance, but by their day.</p>
        
        <div class="highlight-box">
            <span class="highlight-title">THE THURSDAY CONNECTION (THE STORM PRINCE)</span>
            <p>Thursday is the key. In every major Indo-European language, Thursday is named after the "Thunder God" who acts as the active ruler of the Pantheon.</p>
            <ul>
                <li><strong>Norse:</strong> <em>Thor's Day</em> (Thursday).</li>
                <li><strong>Roman:</strong> <em>Dies Jovis</em> (Jove/Jupiter's Day) &rarr; French <em>Jeudi</em>, Spanish <em>Jueves</em>.</li>
                <li><strong>Greek:</strong> <em>Zeus</em> (Cognate with Jove/Dyeus).</li>
                <li><strong>Germanic:</strong> <em>Donnerstag</em> (Thunder Day).</li>
            </ul>
            <p><strong>Conclusion:</strong> Thor, Jupiter, and Zeus are the same historical archetype: The Storm King who rules the middle heavens.</p>
        </div>

        <div class="highlight-box">
            <span class="highlight-title">THE TUESDAY CONNECTION (THE WAR GOD)</span>
            <p>Tuesday reveals the god of War and Iron. The connection here is absolute.</p>
            <ul>
                <li><strong>Norse:</strong> <em>Tyr's Day</em> (Tiw's Day).</li>
                <li><strong>Roman:</strong> <em>Dies Martis</em> (Mars' Day) &rarr; French <em>Mardi</em>, Spanish <em>Martes</em>.</li>
                <li><strong>Greek:</strong> <em>Ares</em> (Associated with Mars).</li>
                <li><strong>Babylonian:</strong> <em>Nergal</em> (Planet Mars).</li>
            </ul>
        </div>

        <div class="section-title">2. The "Cosmic Coup": Father vs. Prince</div>
        <p>A universal feature of these mythologies is the <strong>Succession Myth</strong>. The current "King of the Gods" is rarely the Creator. Instead, he is a son who overthrew his father. This distinguishes the <em>Father</em> archetype from the <em>Prince</em> archetype.</p>
        
        <div class="sub-section">The "Old King" (Saturn/Cronus/Anu)</div>
        <p>The Father figure is often distant, retired, or imprisoned. He represents the "Golden Age" before the current world order. He is associated with Time (Chronos) and Agriculture (Saturn).</p>
        <ul>
            <li><strong>Greek:</strong> Cronus (Deposed by Zeus).</li>
            <li><strong>Sumerian:</strong> Anu (Remote Sky Father, ceded power to Enlil).</li>
            <li><strong>Canaanite:</strong> El (The "Father of Years," largely passive compared to Baal).</li>
            <li><strong>Norse:</strong> The Giants (Ymir) represent the older order before Odin/Thor.</li>
        </ul>

        <div class="sub-section">The "Storm Prince" (Jupiter/Zeus/Baal)</div>
        <p>The Prince is the active executive. He wields the Thunderbolt, controls the rain (vital for agriculture), and physically leads the gods in war against Chaos (Dragons/Giants).</p>
        <ul>
            <li><strong>Babylon:</strong> Marduk defeats Tiamat (Chaos) to become King.</li>
            <li><strong>Greece:</strong> Zeus defeats Typhon (Chaos) to secure Olympus.</li>
            <li><strong>Canaan:</strong> Baal defeats Yam (Sea/Chaos) to earn his palace.</li>
            <li><strong>India:</strong> Indra defeats Vritra (Dragon) to release the waters.</li>
        </ul>

        <div class="section-title">3. The Etymological Chain (Japheth's Line)</div>
        <p>The spread of the Indo-European (Japhetic) peoples left a clear linguistic trail in the names of the Sky Father.</p>
        <p>The Proto-Indo-European root is <strong>*Dyeus Phter</strong> (Sky Father).</p>
        <ul>
            <li><strong>Sanskrit (India):</strong> <em>Dyaus Pita</em></li>
            <li><strong>Greek:</strong> <em>Zeus Pater</em></li>
            <li><strong>Latin (Rome):</strong> <em>Jupiter</em> (from Iou-Pater)</li>
            <li><strong>Germanic:</strong> <em>Tiwaz</em> (became Tyr)</li>
        </ul>
        <p>This linguistic DNA proves that Hindu, Greek, Roman, and Norse mythologies are divergent branches of a single original religious system.</p>

        <div class="section-title">4. The Antediluvian Link: The Watchers</div>
        <p>Almost every culture remembers a group of "gods" who existed <em>before</em> the current pantheon. These are the Titans (Greek), the Apkallu (Sumerian), or the Watchers (Enochian).</p>
        <p>They are characterized by:</p>
        <ul>
            <li><strong>Teaching Civilization:</strong> They taught humanity metallurgy, astronomy, and cosmetics (Book of Enoch / Prometheus).</li>
            <li><strong>Imprisonment:</strong> They were bound in the Underworld (Tartarus) by the Storm God (Zeus/God).</li>
            <li><strong>The Flood:</strong> Their reign ended with a catastrophic Deluge.</li>
        </ul>
        <p>This suggests the "Titans" were not gods, but the historical <em>Antediluvian</em> rulers or angelic beings described in Genesis 6.</p>

        <div class="section-title">5. Conclusion</div>
        <p>The data suggests that human mythology is not a collection of isolated fictions, but a <strong>fragmented history</strong>. Whether through the lens of Genesis (Shem, Ham, Japheth) or secular anthropology, the story remains the same: A single family of archetypes, diverging over time, remembering the same Fathers, Princes, and Wars under different names.</p>
    </div>
</div>

<script>
    const data = {"ANTEDILUVIAN": {"parent": "Root", "coords": [31.0, 46.0], "deities": {"Primordial": ["Abzu", "Deep Space / Void", "Fresh Water Abyss", "Sum: Ab (Water) + Zu (Deep)"], "Titan": ["THE WATCHERS", "Fallen Stars", "Book of Enoch: Grigori", "Heb: Iyr (Wakeful Ones)"], "Father": ["ANU", "The Heavens", "Horned Cap", "Sum: An (Sky/High)"], "Prince": ["ENLIL", "The Storm", "Tablet of Destinies", "Sum: En (Lord) + Lil (Wind)"], "War": ["NINURTA", "Saturn", "The Hunter / Net", "Sum: Nin (Lord) + Urta (Barley)"], "Wisdom": ["Enki", "Mercury", "DNA / Serpent", "Sum: En (Lord) + Ki (Earth)"], "Mother": ["Nammu", "Sea", "Mother Goddess", "Sum: Ama (Mother)"], "Love": ["-", "-", "-", "-"], "Sun": ["-", "-", "-", "-"], "Death": ["-", "-", "-", "-"], "Sea": ["-", "-", "-", "-"], "Moon": ["-", "-", "-", "-"], "Fertility": ["-", "-", "-", "-"]}}, "SUMERIAN": {"parent": "ANTEDILUVIAN", "coords": [31.5, 45.5], "deities": {"Father": ["ANU", "Heaven", "Bull / High Judge", "Proto-Semitic: *Antu"], "Prince": ["ENLIL", "Storm", "Wind / Command", "Lord of the Air"], "War": ["NINURTA", "Saturn", "Double-Eagle", "Lord of the Plough"], "Love": ["Inanna", "Venus Star", "Lion / 8-Pt Star", "Nin-An-Na (Lady of Heaven)"], "Wisdom": ["Enki", "Mercury", "Goat-Fish", "Lord of the Earth"], "Sun": ["Utu", "Sunday", "Saw-Knife", "Akk: Shamash (Sun)"], "Death": ["Ereshkigal", "Underworld", "Lapis Lazuli", "Lady of Great Earth"], "Mother": ["Ninhursag", "Mountain", "Womb Goddess", "Lady of Sacred Mountain"], "Sea": ["Enki", "Abzu", "Fresh Water", "The Watery Deep"], "Moon": ["Nanna", "Monday", "Crescent Boat", "Lord of Wisdom"], "Fertility": ["Damuzi", "Shepherd", "Dying God", "Dumuzid (Faithful Son)"], "Primordial": ["Nammu", "Sea", "Primeval Mother", "Root of Tiamat"], "Titan": ["Anu", "Sky", "Dome", "High One"]}}, "BABYLONIAN": {"parent": "SUMERIAN", "coords": [32.5, 44.4], "deities": {"Father": ["EA / ENLIL", "Old Gods", "Water Pot", "Lord of Deep"], "Prince": ["MARDUK", "Thursday", "Dragon Slayer", "Amar-Utu (Calf of Sun)"], "War": ["NERGAL", "Tuesday", "Lion-Man", "Lord of the Grave"], "Love": ["Ishtar", "Friday", "Lion / Star", "Cognate: Astarte"], "Wisdom": ["Nabu", "Wednesday", "Stylus / Tablet", "Root: Nb (To Prophesy)"], "Sun": ["Shamash", "Sunday", "Solar Disk", "Root: *Sms (Sun)"], "Death": ["Nergal", "Grave", "Plague", "Lord of Transformation"], "Mother": ["Sarpanit", "Seed", "Birth", "Zer-Banitu (Creator of Seed)"], "Sea": ["Ea", "Deep", "Fish-Man", "House of Water"], "Moon": ["Sin", "Monday", "Lamp", "Su-En (Lord of Knowledge)"], "Fertility": ["Tammuz", "Spring", "Shepherd", "Dumuzi Derivative"], "Primordial": ["Apsu", "Fresh Water", "Aquifer", "Father Deep"], "Titan": ["Tiamat", "Salt Water", "Chaos Dragon", "Sea"]}}, "ASSYRIAN": {"parent": "BABYLONIAN", "coords": [36.3, 43.1], "deities": {"Father": ["ANU", "Sky", "Heavens", "The High One"], "Prince": ["ASHUR", "The Disk", "Archer", "A\u0161\u0161ur (To be Happy)"], "War": ["NINURTA", "Saturn", "Storm Bird", "Champion of Enlil"], "Love": ["Ishtar", "Friday", "Lioness", "Issar (Assyrian form)"], "Wisdom": ["Ea", "Sage", "Magic", "Lord of Wisdom"], "Sun": ["Shamash", "Sunday", "Eye", "Judge of Heaven"], "Death": ["Nergal", "Tomb", "Burner", "Ruler of the Dead"], "Mother": ["Mullissu", "Queen", "Throne", "Nin-Lil (Lady Air)"], "Sea": ["Ea", "Water", "Purification", "Source of Rivers"], "Moon": ["Sin", "Monday", "Crescent", "Wise Lord"], "Fertility": ["Tammuz", "Crops", "Grain", "Life of Earth"], "Primordial": ["-", "-", "-", "-"], "Titan": ["Tiamat", "Dragon", "Chaos", "Deep"]}}, "ZOROASTRIAN": {"parent": "ASSYRIAN", "coords": [30.0, 53.0], "deities": {"Father": ["AHURA MAZDA", "Wisdom", "Spirit / Fire", "Ahura (Lord) + Mazda"], "Prince": ["MITHRA", "Covenant", "Light / Oath", "Root: *Mi- (To Bind)"], "War": ["VERETHRAGNA", "Victory", "Boar", "Verethra (Obstacle)"], "Love": ["Spenta Armaiti", "Devotion", "Earth", "Holy Devotion"], "Wisdom": ["Vohu Manah", "Good Mind", "Intelligence", "Good Thought"], "Sun": ["Mithra", "Sun", "Chariot", "The Light"], "Death": ["Ahriman", "Darkness", "Destruction", "Angra Mainyu"], "Mother": ["Anahita", "Water", "Purity", "The Immaculate One"], "Sea": ["Apam Napat", "Waters", "Grandson", "Child of Waters"], "Moon": ["Mah", "Monday", "Moon", "PIE: *MeHns"], "Fertility": ["Anahita", "River", "Life", "The Moist One"], "Primordial": ["Zurvan", "Time", "Infinite Time", "Zurvan"], "Titan": ["-", "-", "-", "-"]}}, "EGYPTIAN": {"parent": "SUMERIAN", "coords": [26.8, 30.8], "deities": {"Father": ["AMUN-RA", "Hidden", "Ram / Goose", "Imn (Hidden) + R\ua725"], "Prince": ["HORUS", "Rising Sun", "Falcon", "\u1e24r (The Distant One)"], "War": ["SEKHMET", "Red Star", "Lioness", "S\u1e2bm (Power)"], "Love": ["Hathor", "Venus", "Cow / Mirror", "\u1e24wt-\u1e24r (House of Horus)"], "Wisdom": ["Thoth", "Wednesday", "Ibis", "D\u1e25wty (He of Ibis)"], "Sun": ["Ra", "Sunday", "Barque", "R\ua725 (Sun)"], "Death": ["Osiris", "Judge", "Crook & Flail", "Wsjr (Powerful?)"], "Mother": ["Isis", "Throne", "Magic Knot", "\ua722st (Throne)"], "Sea": ["Sobek", "Nile", "Crocodile", "Sbk (Uniter)"], "Moon": ["Khonsu", "Monday", "Disk", "Khnsw (Traveller)"], "Fertility": ["Geb", "Earth", "Goose", "Gb (Earth)"], "Primordial": ["Nun", "Void", "Dark Waters", "Nnw"], "Titan": ["Atum", "Setting Sun", "Self-Created", "Tm"]}}, "YORUBA": {"parent": "EGYPTIAN", "coords": [7.8, 5.0], "deities": {"Father": ["OLORUN", "Sky Owner", "Breath", "Oni (Owner) + Orun"], "Prince": ["SHANGO", "Thursday", "Double Axe", "Striker?"], "War": ["OGUN", "Tuesday", "Iron / Machete", "Ogun (War)"], "Love": ["Oshun", "Venus", "Brass / River", "Source?"], "Wisdom": ["Orunmila", "Fate", "Divination", "Heaven Knows Salvation"], "Sun": ["Olorun", "Day", "The Sun itself", "Sun Owner"], "Death": ["Iku", "Death", "Club", "Death Personified"], "Mother": ["Yemaya", "Mother", "7 Skirts", "Mother of Fish"], "Sea": ["Olokun", "Ocean", "Deep Sea", "Owner of Ocean"], "Moon": ["Oshu", "Month", "Moon", "Month/Moon"], "Fertility": ["Oya", "Niger", "Wind", "She Who Tears"], "Primordial": ["-", "-", "-", "-"], "Titan": ["Olodumare", "Source", "Supreme", "Owner"]}}, "HAITIAN": {"parent": "YORUBA", "coords": [18.9, -72.2], "deities": {"Father": ["BON DIEU", "Sky", "High God", "Good God"], "Prince": ["DAMBALLAH", "Serpent", "White Snake", "Dahomey: Dan"], "War": ["OGOUN", "Iron", "Red / Rum", "From Yoruba Ogun"], "Love": ["Erzulie", "Pink", "Jewelry", "Ezili (Goddess)"], "Wisdom": ["Papa Legba", "Crossroads", "Keys", "Yoruba: Elegba"], "Sun": ["Legba", "Sun", "Old Man", "Solar Aspect"], "Death": ["Baron Samedi", "Grave", "Top Hat", "Fr: Samedi (Sat)"], "Mother": ["Ezili Dantor", "Protector", "Scars", "Black Madonna"], "Sea": ["Agwe", "Sea", "Boat", "Sovereign of Seas"], "Fertility": ["Ayida-Weddo", "Rainbow", "Snake", "Rainbow Serpent"], "Primordial": ["-", "-", "-", "-"], "Titan": ["Bondye", "Good God", "Remote", "Bon Dieu"]}}, "CANAANITE": {"parent": "SUMERIAN", "coords": [32.0, 35.0], "deities": {"Father": ["EL", "Saturn", "Father of Years", "The Father"], "Prince": ["BAAL", "Thursday", "Club / Storm", "Ba\u02bfl (Master)"], "War": ["ANAT", "Tuesday", "Virgin Warrior", "\u02bfnt (Answer?)"], "Love": ["Astarte", "Friday", "Star", "\u02bf\u1e6ftrt (Venus)"], "Wisdom": ["Kothar", "Craft", "Smith", "Skillful"], "Sun": ["Shapash", "Sun", "Torch", "\u0160p\u0161 (Sun)"], "Death": ["Mot", "Drought", "Swallower", "Mwt (Death)"], "Mother": ["Asherah", "Sea Lady", "Tree", "She who treads sea"], "Sea": ["Yam", "Sea", "Serpent", "Ym (Sea)"], "Moon": ["Yarikh", "Moon", "City", "Yr\u1e2b (Moon)"], "Fertility": ["Dagon", "Grain", "Fish/Grain", "Dgn (Grain)"], "Primordial": ["Chaos", "-", "-", "-"], "Titan": ["El", "Saturn", "Bull", "God"]}}, "PHOENICIAN": {"parent": "CANAANITE", "coords": [33.5, 35.3], "deities": {"Father": ["BAAL SHAMEM", "Heavens", "Lord of Sky", "Lord of Heavens"], "Prince": ["MELQART", "Hercules", "Lion Skin", "King of City"], "War": ["RESHEPH", "Mars", "Gazelle", "R\u0161p (Flame)"], "Love": ["Astarte", "Friday", "Sphinx", "Lady"], "Wisdom": ["Eshmun", "Healing", "Serpent", "\u0160mn (Oil)"], "Sun": ["Baal Hammon", "Solar", "Ram", "Lord of Brazier"], "Death": ["Mot", "Death", "Heat", "Death"], "Mother": ["Tanit", "Lady", "Triangle", "Serpent Lady?"], "Sea": ["Yam", "Waves", "Judge", "Sea"], "Moon": ["Yarikh", "Lunar", "Sickle", "Moon"], "Fertility": ["Eshmun", "Spring", "Pomegranate", "Healer"], "Primordial": ["-", "-", "-", "-"], "Titan": ["El", "Saturn", "Chronos", "God"]}}, "HINDU": {"parent": "SUMERIAN", "coords": [20.5, 78.9], "deities": {"Father": ["BRAHMA", "Creator", "4 Faces", "Brh (Expand)"], "Prince": ["INDRA", "Thursday", "Vajra", "Indu (Drop)"], "War": ["KARTIKEYA", "Tuesday", "Peacock", "Pleiades"], "Love": ["Lakshmi", "Friday", "Lotus", "Lakshya (Goal)"], "Wisdom": ["Budha", "Wednesday", "Merchant", "Budh (Awake)"], "Sun": ["Surya", "Sunday", "7 Horses", "Svar (Shine)"], "Death": ["Yama", "Judge", "Noose", "Twin/Restrainer"], "Mother": ["Durga", "Power", "Tiger", "Fortress"], "Sea": ["Varuna", "Ocean", "Makara", "Var (Cover)"], "Moon": ["Chandra", "Monday", "Antelope", "Chand (Shine)"], "Fertility": ["Prithvi", "Earth", "Cow", "The Vast One"], "Primordial": ["Aditi", "Infinity", "Mother", "Unbound"], "Titan": ["Dyaus Pita", "Sky Father", "Bull", "Dyaus + Pita"]}}, "GREEK": {"parent": "HINDU", "coords": [39.0, 22.0], "deities": {"Father": ["CRONUS", "Saturn", "Golden Age", "Titan King"], "Prince": ["ZEUS", "Thursday", "Lightning", "PIE: *Dyeus"], "War": ["ARES", "Tuesday", "Spear", "Are (Bane)"], "Love": ["Aphrodite", "Friday", "Shell", "Aphros (Foam)"], "Wisdom": ["Hermes", "Wednesday", "Caduceus", "Herma (Stones)"], "Sun": ["Apollo", "Sunday", "Lyre", "Destroyer?"], "Death": ["Hades", "Unseen", "Bident", "Unseen One"], "Mother": ["Hera", "Queen", "Peacock", "Protector"], "Sea": ["Poseidon", "Earthshaker", "Trident", "Lord + Earth"], "Moon": ["Selene", "Monday", "Chariot", "Selas (Light)"], "Fertility": ["Demeter", "Harvest", "Wheat", "Earth Mother"], "Primordial": ["Chaos", "Void", "Gap", "Khaos"], "Titan": ["Cronus", "Saturday", "Sickle", "Ker"]}}, "ROMAN": {"parent": "GREEK", "coords": [41.9, 12.5], "deities": {"Father": ["SATURN", "Saturday", "Old King", "God of Seeds"], "Prince": ["JUPITER", "Thursday", "Eagle", "Iou-Pater"], "War": ["MARS", "Tuesday", "Wolf", "Mavors"], "Love": ["Venus", "Friday", "Rose", "Venes (Desire)"], "Wisdom": ["Mercury", "Wednesday", "Coin", "Merchandise"], "Sun": ["Sol", "Sunday", "Crown", "PIE: *Sawel"], "Death": ["Pluto", "Wealth", "Keys", "Ploutos (Wealth)"], "Mother": ["Juno", "Queen", "Goat", "Iuvenis (Youth)"], "Sea": ["Neptune", "Sea", "Trident", "Nebh (Damp)"], "Moon": ["Luna", "Monday", "Crescent", "Lucna (Shiner)"], "Fertility": ["Ceres", "Grain", "Sheaf", "Ker (Grow)"], "Primordial": ["Chaos", "-", "-", "-"], "Titan": ["Saturn", "Saturday", "Scythe", "Sowing"]}}, "NORSE": {"parent": "ROMAN", "coords": [60.4, 8.4], "deities": {"Father": ["ODIN", "Wednesday", "One Eye", "Wotan (Fury)"], "Prince": ["THOR", "Thursday", "Hammer", "Thunder"], "War": ["TYR", "Tuesday", "Hand", "Tiwaz (God)"], "Love": ["Freyja", "Friday", "Falcon", "Prauja (Lady)"], "Wisdom": ["Mimir", "Well", "Head", "Mim (Memory)"], "Sun": ["Sunna", "Sunday", "Shield", "Sunnon"], "Death": ["Hel", "Underworld", "Half-Corpse", "Concealed"], "Mother": ["Frigg", "Queen", "Distaff", "Beloved"], "Sea": ["Njord", "Ship", "Vanir", "Nerthuz"], "Moon": ["Mani", "Monday", "Moon", "Meno (Moon)"], "Fertility": ["Frey", "Phallic", "Boar", "Praujaz (Lord)"], "Primordial": ["Ginnungagap", "Void", "Magic Void", "Gap"], "Titan": ["Ymir", "Giant", "Ice", "Twin"]}}, "CELTIC": {"parent": "NORSE", "coords": [53.4, -7.0], "deities": {"Father": ["THE DAGDA", "All-Father", "Club", "Good God"], "Prince": ["LUGH", "Light", "Spear", "Leuk (Light)"], "War": ["MORRIGAN", "Battle", "Crow", "Terror Queen"], "Love": ["Aengus Og", "Youth", "Birds", "One Strength"], "Wisdom": ["Ogma", "Words", "Ogham", "Ogmos (Track)"], "Sun": ["Lugh", "Lammas", "Harvest", "Shining One"], "Death": ["Donn", "Dark One", "Red Rider", "Dark/Brown"], "Mother": ["Danu", "River", "Breasts", "Flowing Water"], "Sea": ["Manannan", "Ocean", "Mist", "Ireland/Water"], "Moon": ["Arianrhod", "Wheel", "Silver", "Silver Wheel"], "Fertility": ["Brigid", "Spring", "Fire", "High One"], "Primordial": ["-", "-", "-", "-"], "Titan": ["Danu", "Waters", "Mother", "River"]}}, "DRUID": {"parent": "CELTIC", "coords": [46.2, 2.2], "deities": {"Father": ["TARANIS", "Thunder", "Wheel", "Taran (Thunder)"], "Prince": ["TOUTATIS", "Tribe", "Protector", "Teuta (Tribe)"], "War": ["CAMULUS", "War", "Sword", "Camulo (Champion)"], "Love": ["Sirona", "Star", "Snake", "Ster (Star)"], "Wisdom": ["Ogmios", "Eloquence", "Chains", "Leading"], "Sun": ["Belenus", "Bright", "Horse", "Bel (Bright)"], "Death": ["Dis Pater", "Father", "Ancestor", "Rich Father"], "Mother": ["Rosmerta", "Plenty", "Cornucopia", "Provider"], "Sea": ["Sequana", "Seine", "Duck", "Fast Flowing"], "Moon": ["-", "-", "-", "-"], "Fertility": ["Cernunnos", "Horned", "Stag", "Karnon (Horn)"], "Primordial": ["-", "-", "-", "-"], "Titan": ["-", "-", "-", "-"]}}, "CHINESE": {"parent": "HINDU", "coords": [35.8, 104.1], "deities": {"Father": ["JADE EMPEROR", "Polestar", "Tablet", "Yu Huang"], "Prince": ["ERLANG SHEN", "Nephew", "3rd Eye", "Second Son"], "War": ["GUAN YU", "Mars", "Guan Dao", "Lord Guan"], "Love": ["Chang'e", "Moon", "Rabbit", "Beautiful Lady"], "Wisdom": ["Laozi", "Dao", "Scroll", "Old Master"], "Sun": ["Xihe", "Sun", "Charioteer", "Breath Harmony"], "Death": ["Yanluo Wang", "Judge", "Book", "King Yama"], "Mother": ["Xi Wangmu", "Queen", "Peaches", "Queen Mother"], "Sea": ["Dragon King", "East Sea", "Dragon", "Long Wang"], "Moon": ["Chang'e", "Monday", "Elixir", "Moon Goddess"], "Fertility": ["Hou Tu", "Earth", "Soil", "Queen Earth"], "Primordial": ["Wuji", "Void", "Limitless", "No Ridgepole"], "Titan": ["Pangu", "Giant", "Cosmic Egg", "Antiquity"]}}, "JAPANESE": {"parent": "CHINESE", "coords": [36.2, 138.2], "deities": {"Father": ["IZANAGI", "Father", "Spear", "First Male"], "Prince": ["SUSANOO", "Storm", "Sword", "Impetuous"], "War": ["HACHIMAN", "Arrow", "Bow", "God 8 Banners"], "Love": ["Uzume", "Dawn", "Dance", "Whirling"], "Wisdom": ["Tenjin", "Scholar", "Plum", "Heavenly"], "Sun": ["Amaterasu", "Sun", "Mirror", "Shining"], "Death": ["Izanami", "Yomi", "Decay", "She Who Invites"], "Mother": ["Izanami", "Mother", "Creation", "First Female"], "Sea": ["Ryujin", "Dragon", "Jewels", "Dragon God"], "Moon": ["Tsukuyomi", "Moon", "Mirror", "Moon Reading"], "Fertility": ["Inari", "Fox", "Rice", "Carrying Rice"], "Primordial": ["Chaos", "-", "Egg", "Konton"], "Titan": ["Izanagi", "Creator", "Spear", "He Who Invites"]}}, "AZTEC": {"parent": "CHINESE", "coords": [19.4, -99.1], "deities": {"Father": ["OMETEOTL", "Two", "Duality", "Lord Duality"], "Prince": ["HUITZILOPOCHTLI", "Sun/War", "Hummingbird", "Left-Hand Hummingbird"], "War": ["HUITZILOPOCHTLI", "Mars", "Blue Skin", "Warrior"], "Love": ["Xochiquetzal", "Flower", "Butterfly", "Precious Flower"], "Wisdom": ["Quetzalcoatl", "Venus", "Wind", "Feathered Serpent"], "Sun": ["Tonatiuh", "Disk", "Calendar", "Goes Forth"], "Death": ["Mictlantecuhtli", "Bone", "Skeleton", "Lord Mictlan"], "Mother": ["Coatlicue", "Skirt", "Snakes", "Serpent Skirt"], "Sea": ["Chalchiuhtlicue", "Jade", "Water Skirt", "Jade Skirt"], "Moon": ["Coyolxauhqui", "Moon", "Bells", "Painted Bells"], "Fertility": ["Tlaloc", "Rain", "Fangs", "Makes Sprout"], "Primordial": ["-", "-", "-", "-"], "Titan": ["Ometeotl", "Dual", "Two-Lord", "Two God"]}}, "ALGONQUIAN": {"parent": "AZTEC", "coords": [45.0, -84.0], "deities": {"Father": ["GREAT SPIRIT", "Creator", "Invisible", "Kitchi-Manitou"], "Prince": ["MANITOU", "Spirit", "Life Force", "Mystery"], "War": ["HIAWATHA", "Hero", "Peacemaker", "Makes Rivers"], "Love": ["-", "-", "-", "-"], "Wisdom": ["Gluskap", "Teacher", "Stone Canoe", "Good Man"], "Sun": ["Grandfather", "Sun", "Day Maker", "Sun Spirit"], "Death": ["-", "-", "-", "-"], "Mother": ["Nokomis", "Grandmother", "Earth", "Grandmother"], "Sea": ["Great Water", "Ocean", "Whale", "Big Water"], "Moon": ["Grandmother", "Moon", "Night Sun", "Moon Spirit"], "Fertility": ["Earth Mother", "Earth", "Harvest", "Mother Earth"], "Primordial": ["-", "-", "-", "-"], "Titan": ["-", "-", "-", "-"]}}, "POLYNESIAN": {"parent": "HINDU", "coords": [-15.0, -140.0], "deities": {"Father": ["RANGI", "Sky", "Lover", "Sky Father"], "Prince": ["TANE", "Forest", "Trees", "Man/Male"], "War": ["TU", "War", "Grimace", "Angry Face"], "Love": ["Hina", "Moon", "Tapa", "Girl/White"], "Wisdom": ["Maui", "Trickster", "Fishhook", "Culture Hero"], "Sun": ["Tama-nui-te-ra", "Sun", "Snare", "Great Son"], "Death": ["Hine-nui-te-po", "Night", "Obsidian", "Woman of Night"], "Mother": ["Papa", "Earth", "Soil", "Flat Surface"], "Sea": ["Tangaroa", "Ocean", "Fish", "God of Sea"], "Moon": ["Marama", "Moon", "Fan", "Moon"], "Fertility": ["Rongo", "Peace", "Potato", "Peace/Sound"], "Primordial": ["Po", "Darkness", "Night", "Void"], "Titan": ["Papa", "Earth", "Mother", "Foundation"]}}, "HAWAIIAN": {"parent": "POLYNESIAN", "coords": [19.8, -155.5], "deities": {"Father": ["KANE", "Life", "Sunlight", "Man/Male"], "Prince": ["LONO", "Peace", "Clouds", "News/Sound"], "War": ["KU", "War", "Snatcher", "Upright"], "Love": ["Laka", "Hula", "Maile", "Tame/Gentle"], "Wisdom": ["Lono", "Peace", "Fertility", "Agriculture"], "Sun": ["Kane", "Sun", "East", "Leading Star"], "Death": ["Milu", "Underworld", "Darkness", "Lord of Dead"], "Mother": ["Haumea", "Birth", "Breadfruit", "Birth Goddess"], "Sea": ["Kanaloa", "Ocean", "Squid", "Secure/Firm"], "Moon": ["Mahina", "Moon", "Kapa", "Moon"], "Fertility": ["Hina", "Moon", "Coral", "White"], "Primordial": ["-", "-", "-", "-"], "Titan": ["-", "-", "-", "-"]}}};
    const worldMap = {"type": "FeatureCollection", "features": [{"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-180, -90], [180, -90], [180, 90], [-180, 90], [-180, -90]]]}, "properties": {"name": "Ocean"}}, {"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-10, 35], [50, 15], [30, -35], [10, -35], [-15, 15], [-10, 35]]]}, "properties": {"name": "Africa"}}, {"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-10, 36], [40, 36], [60, 60], [40, 70], [-10, 60], [-10, 36]]]}, "properties": {"name": "Europe"}}, {"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[40, 36], [140, 36], [130, 5], [80, 5], [60, 20], [40, 36]]]}, "properties": {"name": "Asia"}}, {"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-160, 70], [-50, 70], [-60, 10], [-120, 30], [-160, 70]]]}, "properties": {"name": "North America"}}, {"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-80, 10], [-35, -5], [-50, -55], [-80, -5], [-80, 10]]]}, "properties": {"name": "South America"}}, {"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[110, -10], [155, -10], [150, -40], [115, -35], [110, -10]]]}, "properties": {"name": "Australia"}}]};
    
    const width = window.innerWidth;
    const height = window.innerHeight;
    const svg = d3.select("#canvas");
    const g = svg.append("g");
    const analysisView = document.getElementById("analysis-view");
    
    const zoom = d3.zoom().scaleExtent([0.05, 5]).on("zoom", (e) => g.attr("transform", e.transform));
    svg.call(zoom);

    const colors = {
        'Father': '#FFD700', 'Prince': '#00BFFF', 'War': '#C0C0C0', 
        'Love': '#FF69B4', 'Wisdom': '#90EE90', 'Sun': '#FFA500', 
        'Mother': '#FF1493', 'Sea': '#00FFFF', 'Death': '#9370DB',
        'Moon': '#B0E0E6', 'Fertility': '#7CFC00', 'Titan': '#8B0000', 'Primordial': '#777'
    };
    
    let currentMode = 'tree';
    renderTree();

    function switchMode(mode) {
        currentMode = mode;
        d3.selectAll("button").classed("active", false);
        d3.select("#btn-" + mode).classed("active", true);
        
        // Handle Analysis View Toggle
        if (mode === 'analysis') {
            svg.style("display", "none");
            analysisView.style.display = "block";
        } else {
            svg.style("display", "block");
            analysisView.style.display = "none";
            g.selectAll("*").remove();
            
            if(mode === 'tree') renderTree();
            else if(mode === 'cols') renderColumns();
            else renderMap();
        }
    }

    // --- RENDER TREE ---
    function renderTree() {
        const nodeMap = {};
        let rootNode = null;
        for (const [key, val] of Object.entries(data)) nodeMap[key] = { name: key, details: val.deities, children: [] };
        for (const [key, val] of Object.entries(data)) {
            if (val.parent === 'Root') rootNode = nodeMap[key];
            else if (nodeMap[val.parent]) nodeMap[val.parent].children.push(nodeMap[key]);
        }
        
        const d3root = d3.hierarchy(rootNode);
        const treeLayout = d3.tree().nodeSize([580, 950]);
        treeLayout(d3root);

        g.selectAll(".link").data(d3root.links()).enter().append("path").attr("class", "link").attr("d", d3.linkHorizontal().x(d => d.y).y(d => d.x));

        const nodes = g.selectAll(".node").data(d3root.descendants()).enter().append("g").attr("transform", d => `translate(${d.y},${d.x})`);

        nodes.each(function(d) {
            const node = d3.select(this);
            const h = 550, w = 850;
            node.append("rect").attr("width", w).attr("height", h).attr("y", -h/2).attr("fill", "#111").attr("stroke", "#444").attr("rx", 5);
            node.append("text").attr("class", "card-header").attr("x", 15).attr("y", -h/2 + 25).text(d.data.name);
            
            const headers = ["ROLE", "NAME", "LINGUISTIC", "FUNCTIONAL", "ETYMOLOGY"];
            const xPos = [15, 100, 260, 460, 660];
            headers.forEach((hdr, i) => node.append("text").attr("class", "col-header").attr("x", xPos[i]).attr("y", -h/2 + 45).text(hdr));
            node.append("line").attr("x1", 10).attr("x2", w-10).attr("y1", -h/2 + 50).attr("y2", -h/2 + 50).attr("stroke", "#333");

            let y = -h/2 + 70;
            ['Primordial', 'Titan', 'Father', 'Prince', 'War', 'Love', 'Wisdom', 'Sun', 'Death', 'Mother', 'Sea', 'Moon', 'Fertility'].forEach(role => {
                const info = d.data.details[role] || ['-', '-', '-', '-'];
                const col = colors[role] || '#666';
                node.append("text").attr("class", "row-role").attr("x", xPos[0]).attr("y", y).text(role).style("fill", col);
                node.append("text").attr("class", "row-name").attr("x", xPos[1]).attr("y", y).text(info[0]);
                node.append("text").attr("class", "row-data").attr("x", xPos[2]).attr("y", y).text(info[1]);
                node.append("text").attr("class", "row-data").attr("x", xPos[3]).attr("y", y).text(info[2]);
                node.append("text").attr("class", "row-data").attr("x", xPos[4]).attr("y", y).text(info[3]);
                y += 35;
            });
        });
        svg.call(zoom.transform, d3.zoomIdentity.translate(50, height/2).scale(0.35));
    }

    // --- RENDER COLUMNS ---
    function renderColumns() {
        const cultures = Object.keys(data);
        const roles = ['Primordial', 'Titan', 'Father', 'Prince', 'War', 'Love', 'Wisdom', 'Sun', 'Death', 'Mother', 'Sea', 'Moon', 'Fertility'];
        const colWidth = 260;
        
        cultures.forEach((cult, i) => {
            const x = i * colWidth;
            const details = data[cult].deities;
            g.append("rect").attr("class", "col-bg").attr("x", x).attr("y", -50).attr("width", colWidth-10).attr("height", 40).attr("fill", "#222");
            g.append("text").attr("class", "col-title").attr("x", x + colWidth/2 - 5).attr("y", -25).text(cult);
            
            roles.forEach((role, j) => {
                const y = (j * 70);
                const info = details[role] || ['-', '-', '-', '-'];
                const col = colors[role] || '#fff';
                g.append("rect").attr("class", "col-bg").attr("x", x).attr("y", y).attr("width", colWidth-10).attr("height", 65).attr("fill", "#111");
                g.append("text").attr("x", x+5).attr("y", y+15).text(role).attr("font-size", "9px").attr("fill", col).attr("font-weight", "bold");
                g.append("text").attr("x", x+5).attr("y", y+35).text(info[0]).attr("font-size", "12px").attr("fill", "#fff").attr("font-weight", "bold");
                g.append("text").attr("x", x+5).attr("y", y+50).text(info[1]).attr("font-size", "9px").attr("fill", "#888");
            });
        });
        svg.call(zoom.transform, d3.zoomIdentity.translate(50, 100).scale(0.8));
    }

    // --- RENDER MAP ---
    function renderMap() {
        const projection = d3.geoMercator().scale(160).translate([width/2, height/1.5]);
        const path = d3.geoPath().projection(projection);
        
        g.selectAll("path").data(worldMap.features).enter().append("path").attr("d", path).attr("class", "land");

        const nodeMap = {};
        for (const [key, val] of Object.entries(data)) nodeMap[key] = val;
        
        for (const [key, val] of Object.entries(data)) {
            if (val.parent !== 'Root' && nodeMap[val.parent]) {
                const p1 = projection([val.coords[1], val.coords[0]]);
                const p2 = projection([nodeMap[val.parent].coords[1], nodeMap[val.parent].coords[0]]);
                g.append("line").attr("x1", p1[0]).attr("y1", p1[1]).attr("x2", p2[0]).attr("y2", p2[1])
                 .attr("stroke", "#D4AF37").attr("stroke-width", 1).attr("opacity", 0.6).attr("stroke-dasharray", "5,5");
            }
        }
        
        for(const [key, val] of Object.entries(data)) {
            const [x, y] = projection([val.coords[1], val.coords[0]]);
            const node = g.append("g").attr("transform", `translate(${x},${y})`);
            node.append("circle").attr("class", "map-pin").attr("r", 5);
            node.append("text").attr("y", -10).attr("text-anchor", "middle").text(key).style("fill", "white").style("font-size", "11px").style("text-shadow", "0 0 3px black").style("font-weight", "bold");
        }
        svg.call(zoom.transform, d3.zoomIdentity.translate(0, 0).scale(1));
    }
</script>
</body>
</html>
